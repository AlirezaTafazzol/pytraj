language: python
env:
    matrix:
        - PYTHON_VERSION=2.7
        - PYTHON_VERSION=3.3
        - PYTHON_VERSION=3.4 
    global:
        # encrypted TRAVIS_TO_ANACONDA
        - secure: am-5aca48e7-ab34-4c4d-8240-54c098cb964c


sudo: false
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
      - g++
      - gfortran
      - libz-dev
      - libbz2-dev
      - libnetcdf-dev

install:
    - source devtools/travis-ci/setup_env.sh 
    - conda config --add channels https://conda.binstar.org/pytraj
    - conda build devtools/conda-recipe/pytraj

script:
    - git clone https://github.com/Amber-MD/cpptraj
    - export CPPTRAJHOME=`pwd`"/cpptraj/"
    - conda install pytraj-dev -c pytraj --force --yes
    - cd ./tests
    - python ./run_simple_test.py
      #- python ./run_all_and_find_fails.py
      #- python ./test_memory_accumulation.py
      #- cd ../examples
      #- python ./run_all_and_find_fails.py

after_success:
  - echo "after_success"
  - source devtools/travis-ci/after_sucess.sh

notifications:
  email: false
